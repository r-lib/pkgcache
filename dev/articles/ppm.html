<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>pkgcache and Posit Package Manager on Linux • pkgcache</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="pkgcache and Posit Package Manager on Linux">
<meta name="description" content="Using pkgcache with the Posit Package Manager on Linux.
">
<meta property="og:description" content="Using pkgcache with the Posit Package Manager on Linux.
">
<meta name="robots" content="noindex">
<script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="r-lib.github.io/pkgcache,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pkgcache</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.2.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/internals.html">pkgcache internals</a></li>
    <li><a class="dropdown-item" href="../articles/ppm.html">pkgcache and Posit Package Manager on Linux</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/pkgcache/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>pkgcache and Posit Package Manager on Linux</h1>
                        <h4 data-toc-skip class="author">Gábor
Csárdi</h4>
            
            <h4 data-toc-skip class="date">2025-10-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/pkgcache/blob/main/vignettes/ppm.Rmd" class="external-link"><code>vignettes/ppm.Rmd</code></a></small>
      <div class="d-none name"><code>ppm.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="ppm-and-p3m">PPM and P3M<a class="anchor" aria-label="anchor" href="#ppm-and-p3m"></a>
</h2>
<p><a href="https://posit.co/products/enterprise/package-manager/" class="external-link">Posit
Package Manager</a> (PPM) is a Posit product to help organizations
organize R and Python packages.</p>
<p><a href="https://packagemanager.posit.co/client/#/" class="external-link">Posit Public
Package Manager</a> (P3M) is a free instance of PPM.</p>
<p>pkgcache deals with all PPM instances the same way currently,
including the P3M instance.</p>
<p>In the following, by PPM we mean any PPM instance.</p>
</div>
<div class="section level2">
<h2 id="why-ppm">Why PPM?<a class="anchor" aria-label="anchor" href="#why-ppm"></a>
</h2>
<ul>
<li>
<strong>Fast installation.</strong> PPM has binary packages on
Linux, for many distributions, for the last 5 R releases.</li>
<li>
<strong>New packages on older R versions.</strong> On Windows, new
package versions are available as binary packages, on older R versions
as well.</li>
<li>
<strong>Time traveling.</strong> Use an older state of the
repository, as it was on a specific date.</li>
</ul>
</div>
<div class="section level2">
<h2 id="pkgcache-and-ppm-on-linux">pkgcache and PPM on Linux<a class="anchor" aria-label="anchor" href="#pkgcache-and-ppm-on-linux"></a>
</h2>
<p>For a better user experience pkgcache handles PPM repositories
specially on Linux.</p>
<p>Call <code><a href="../reference/ppm_has_binaries.html">pkgcache::ppm_has_binaries()</a></code> to decide if PPM
builds binaries for your platform:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pkgcache</span><span class="fu">::</span><span class="fu"><a href="../reference/ppm_has_binaries.html">ppm_has_binaries</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>You can use <code><a href="../reference/current_r_platform.html">pkgcache::current_r_platform()</a></code> to see if
pkgcache detects your platform correctly:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pkgcache</span><span class="fu">::</span><span class="fu"><a href="../reference/current_r_platform.html">current_r_platform</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "x86_64-pc-linux-gnu-ubuntu-24.04"</span></span></code></pre>
<div class="section level3">
<h3 id="setting-up-ppm">Setting up PPM<a class="anchor" aria-label="anchor" href="#setting-up-ppm"></a>
</h3>
<p>Set the <code>repos</code> option to a PPM URL, as suggested by the
PPM setup web page. E.g. see <a href="https://packagemanager.posit.co/client/#/repos/2/overview" class="external-link uri">https://packagemanager.posit.co/client/#/repos/2/overview</a>
for P3M.</p>
<p>You can also set the <code>PKGCACHE_PPM_URL</code> environment
variable to the base URL of a PPM instance (e.g. <a href="https://packagemanager.posit.co" class="external-link uri">https://packagemanager.posit.co</a> for P3M), and the
<code>PKGCACHE_PPM_REPO</code> environment variable to the default PPM
repository. The <code><a href="../reference/repo_get.html">pkgcache::repo_resolve()</a></code> and
<code><a href="../reference/repo_get.html">pkgcache::repo_add()</a></code> functions use these environment
variables (if they are set) to construct PPM URLs. See
<code><a href="../reference/ppm_repo_url.html">?ppm_repo_url</a></code> for details.</p>
</div>
<div class="section level3">
<h3 id="ppm-repository-urls">PPM repository URLs<a class="anchor" aria-label="anchor" href="#ppm-repository-urls"></a>
</h3>
<p>A PPM repository URL for Linux binary packages has the following
form:</p>
<pre><code>{base}/{repo}/__linux__/{binary_url}/{id}</code></pre>
<p>where <code>{base}</code> is the base URL of the PPM instance,
<code>{repo}</code> is a PPM repository, <code>{binary_url}</code> is
the code name of a release of a Linux distribution
(e.g. <code>rhel9</code>), and <code>{id}</code> is the identifier (or
date) of a PPM snapshot or <code>latest</code> for the latest
snapshot.</p>
<p><code><a href="../reference/ppm_platforms.html">ppm_platforms()</a></code> lists platforms supported by a PPM
instance:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pkgcache</span><span class="fu">::</span><span class="fu"><a href="../reference/ppm_platforms.html">ppm_platforms</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A data frame: 34 × 7</span></span></span>
<span><span class="co">##    name        os    binary_url distribution release binaries platforms</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> centos7     linux centos7    centos       7       TRUE     <span style="color: #949494;">&lt;chr [1]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> centos8     linux centos8    centos       8       TRUE     <span style="color: #949494;">&lt;chr [1]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> rhel9       linux rhel9      rockylinux   9       TRUE     <span style="color: #949494;">&lt;chr [7]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> rhel10      linux rhel10     rockylinux   10      TRUE     <span style="color: #949494;">&lt;chr [7]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> opensuse15  linux opensuse15 opensuse     15      TRUE     <span style="color: #949494;">&lt;chr [6]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> opensuse152 linux opensuse1… opensuse     15.2    TRUE     <span style="color: #949494;">&lt;chr [2]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> opensuse153 linux opensuse1… opensuse     15.3    TRUE     <span style="color: #949494;">&lt;chr [2]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> opensuse154 linux opensuse1… opensuse     15.4    TRUE     <span style="color: #949494;">&lt;chr [2]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> opensuse155 linux opensuse1… opensuse     15.5    TRUE     <span style="color: #949494;">&lt;chr [2]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> opensuse156 linux opensuse1… opensuse     15.6    TRUE     <span style="color: #949494;">&lt;chr [2]&gt;</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 24 more rows</span></span></span></code></pre>
<p>The <code>binary_url</code> column contains the code name that you
need to use in the repository URL.</p>
<p><code><a href="../reference/ppm_snapshots.html">ppm_snapshots()</a></code> lists all PPM snapshot dates and
ids:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pkgcache</span><span class="fu">::</span><span class="fu"><a href="../reference/ppm_snapshots.html">ppm_snapshots</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A data frame: 2,933 × 2</span></span></span>
<span><span class="co">##    date       id        </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 2017-10-10 2017-10-10</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 2017-10-11 2017-10-11</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 2017-10-12 2017-10-12</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 2017-10-13 2017-10-13</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 2017-10-14 2017-10-14</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 2017-10-15 2017-10-15</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 2017-10-16 2017-10-16</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 2017-10-17 2017-10-17</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 2017-10-18 2017-10-18</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 2017-10-19 2017-10-19</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 2,923 more rows</span></span></span></code></pre>
<p>You can use the snapshot ids or dates in the PPM repository URL to
select a particular snapshot. E.g. these two repository URLs are
equivalent:</p>
<pre><code>https://packagemanager.posit.co/cran/__linux__/centos7/5
https://packagemanager.posit.co/cran/__linux__/centos7/2017-10-10</code></pre>
</div>
<div class="section level3">
<h3 id="linux-platforms">Linux platforms<a class="anchor" aria-label="anchor" href="#linux-platforms"></a>
</h3>
<p>pkgcache generalizes R’s “machine-vendor-OS” platform triplet on
Linux to include the distribution and release as well. E.g. the platform
of the machine building this document is:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pkgcache</span><span class="fu">::</span><span class="fu"><a href="../reference/current_r_platform.html">current_r_platform</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "x86_64-pc-linux-gnu-ubuntu-24.04"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="ppm-linux-binary-packages">PPM Linux binary packages<a class="anchor" aria-label="anchor" href="#ppm-linux-binary-packages"></a>
</h3>
<p>R does not have built-in support for binary Linux repositories, so
PPM offers binary Linux packages as source packages. This is possible
because R recognizes binary packages at installation time, and handles
them appropriately.</p>
<p>pkgcache detects binary PPM repositories, and constructs their
platform string:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>  <span class="fu">pkgcache</span><span class="fu">::</span><span class="fu"><a href="../reference/meta_cache_deps.html">meta_cache_list</a></span><span class="op">(</span>package <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, <span class="st">"pkgcache"</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"package"</span>, <span class="st">"mirror"</span>, <span class="st">"platform"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  width <span class="op">=</span> <span class="cn">Inf</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A data frame: 4 × 3</span></span></span>
<span><span class="co">##   package  mirror                                                     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> ggplot2  https://packagemanager.posit.co/cran/__linux__/noble/latest</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> pkgcache https://packagemanager.posit.co/cran/__linux__/noble/latest</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> ggplot2  https://cran.rstudio.com                                   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> pkgcache https://cran.rstudio.com                                   </span></span>
<span><span class="co">##   platform                        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> x86_64-pc-linux-gnu-ubuntu-24.04</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> x86_64-pc-linux-gnu-ubuntu-24.04</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> source                          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> source</span></span></code></pre>
<div class="section level4">
<h4 id="metadata-discrepancies">Metadata discrepancies<a class="anchor" aria-label="anchor" href="#metadata-discrepancies"></a>
</h4>
<p>Occasionally, the PPM metadata can be outdated, and pkgcache will
wrongly think that PPM has a binary for a package, whereas it does not,
or the opposite might also be true.</p>
<p>When pkgcache downloads a package as an update to the package cache,
it detects from the PPM response headers whether the downloaded package
is indeed of the expected type. If not, then pkgcache updates its
knowledge about the package.</p>
</div>
</div>
<div class="section level3">
<h3 id="supported-r-versions">Supported R versions<a class="anchor" aria-label="anchor" href="#supported-r-versions"></a>
</h3>
<p>Different PPM instances may support different R versions. The public
P3M instance supports the last five R releases. pkgcache will
automatically check if your configured PPM instance supports your R
version, and <code><a href="../reference/ppm_has_binaries.html">ppm_has_binaries()</a></code>, <code>repo_set()</code>
will act accordingly. You can use the
<code><a href="../reference/ppm_r_versions.html">pkgcache::ppm_r_versions()</a></code> function to list the R versions
supported by your instance:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pkgcache</span><span class="fu">::</span><span class="fu"><a href="../reference/ppm_r_versions.html">ppm_r_versions</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A data frame: 6 × 1</span></span></span>
<span><span class="co">##   r_version</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 4.5      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 4.4      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 4.3      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 4.2      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 4.1      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> 3.6</span></span></code></pre>
<p>Note that these version numbers do not include the patch version.
E.g. <code>4.2</code> means that all <code>4.2.x</code> R versions are
supported.</p>
</div>
</div>
<div class="section level2">
<h2 id="pkgcache-and-ppm-on-windows">pkgcache and PPM on Windows<a class="anchor" aria-label="anchor" href="#pkgcache-and-ppm-on-windows"></a>
</h2>
<p>A PPM instance can have support for Windows binaries, the public P3M
instance does support them.</p>
<p>The R package system supports Windows binaries out of the box, so
setting up PPM on Windows simply means setting the <code>repos</code>
option to a PPM repository. E.g. for the public P3M this would be
something like:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  RSPM <span class="op">=</span> <span class="st">"https://packagemanager.posit.co/cran/latest"</span>,</span>
<span>  CRAN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"repos"</span><span class="op">)</span><span class="op">[[</span><span class="st">"CRAN"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Instead of <code>latest</code> you can use a different snapshot, of
course, and you can also use <code><a href="../reference/repo_get.html">repo_resolve()</a></code> to construct
the URL for your preferred snapshot.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer>
</body>
</html>
